# 商標検索データベース詳細分析レポート

**生成日時**: 2025-07-12 09:07:54  
**データベースサイズ**: 270.93MB  
**総出願数**: 16,688件  

## 📊 データベース概要

このデータベースは、日本特許庁が提供する商標TSVデータ（77ファイル、272MB）を基に構築された商標検索システムのコアデータベースです。SQLiteで実装され、18のテーブルで構成されています。

### 基本統計
- **テーブル数**: 18テーブル
- **総レコード数**: 437,223行（最適化後）
- **インデックス数**: 25個（最適化により9個追加）
- **データ最適化**: 重複レコード61,574行を除去済み

## 🗃️ テーブル構成詳細

### コアテーブル（主要データ）

#### 1. `jiken_c_t` - 事件基本情報テーブル
- **行数**: 16,688件
- **役割**: すべての商標出願の基本情報を格納
- **主要列**:
  - `normalized_app_num` (TEXT, PK): 出願番号（正規化済み）
  - `shutugan_bi` (TEXT): 出願日
  - `reg_reg_ymd` (TEXT): 登録日
- **TSVソース**: `upd_jiken_c_t.tsv`
- **データカバレッジ**: 100%（全出願データの基準テーブル）

#### 2. `standard_char_t_art` - 標準文字商標テーブル
- **行数**: 15,109件
- **役割**: 標準文字で表記された商標の文字情報
- **主要列**:
  - `normalized_app_num` (TEXT): 出願番号
  - `standard_char_t` (TEXT): 標準文字商標
- **TSVソース**: `upd_standard_char_t_art.tsv`
- **データカバレッジ**: 90.5%（15,109/16,688件）

#### 3. `goods_class_art` - 商品区分テーブル
- **行数**: 30,582件
- **役割**: 商標の商品・役務区分情報
- **主要列**:
  - `normalized_app_num` (TEXT): 出願番号
  - `goods_classes` (TEXT): 商品区分番号
  - `reg_num` (TEXT): 登録番号
- **TSVソース**: `upd_goods_class_art.tsv`
- **データカバレッジ**: 68.9%（11,505/16,688件）
- **⚠️ 問題**: 商品区分検索に44秒かかる（LIKE検索による）

#### 4. `jiken_c_t_shohin_joho` - 指定商品・役務情報テーブル
- **行数**: 33,385件
- **役割**: 詳細な指定商品・役務の内容
- **主要列**:
  - `normalized_app_num` (TEXT): 出願番号
  - `designated_goods` (TEXT): 指定商品・役務名
- **TSVソース**: `upd_jiken_c_t_shohin_joho.tsv`
- **データカバレッジ**: 100%（33,385/16,688件 - 複数行可能）

### 商標文字情報テーブル

#### 5. `indct_use_t_art` - 表示用商標テーブル
- **行数**: 31,681件
- **役割**: 表示用の商標文字情報
- **データカバレッジ**: 94.0%（15,683/16,688件）

#### 6. `search_use_t_art_table` - 検索用商標テーブル
- **行数**: 31,681件（重複除去後）
- **役割**: 検索最適化された商標文字情報
- **データカバレッジ**: 94.0%（15,683/16,688件）

### 権利者・申請人情報テーブル

#### 7. `right_person_art_t` - 権利者情報テーブル
- **行数**: 17,099件
- **役割**: 登録商標の権利者情報
- **主要列**:
  - `reg_num` (TEXT): 登録番号
  - `right_person_name` (TEXT): 権利者名
  - `right_person_addr` (TEXT): 権利者住所
- **TSVソース**: `upd_right_person_art_t.tsv`
- **データカバレッジ**: 22.9%（3,823/16,688件）
- **制限**: 登録済み商標のみ

#### 8. `jiken_c_t_shutugannindairinin` - 申請人情報テーブル
- **行数**: 37,019件
- **役割**: 出願時の申請人・代理人情報
- **主要列**:
  - `shutugan_no` (TEXT): 出願番号
  - `shutugannindairinin_code` (TEXT): 申請人コード
  - `shutugannindairinin_sikbt` (TEXT): 区分（1=申請人）
- **TSVソース**: `upd_jiken_c_t_shutugannindairinin.tsv`
- **データカバレッジ**: 
  - 申請人コード: 88.6%（14,787/16,688件）
  - 申請人名: 14.8%（2,472/16,688件）※マッピング経由

### 補助テーブル

#### 9. `t_sample` - 商標画像テーブル
- **行数**: 10,063件
- **役割**: 商標の画像データ（Base64形式）
- **データカバレッジ**: 31.0%（5,170/16,688件）
- **画像形式**: PNG, JPG, GIF対応

#### 10. `t_dsgnt_art` - 称呼テーブル
- **行数**: 31,678件（重複除去後）
- **役割**: 商標の称呼（読み方）情報
- **データカバレッジ**: 89.2%（14,889/16,688件）

#### 11. `t_knd_info_art_table` - 類似群コードテーブル
- **行数**: 64,404件
- **役割**: 商品・役務の類似群コード
- **データカバレッジ**: 79.1%（13,203/16,688件）

### マッピング・関係テーブル

#### 12. `reg_mapping` - 登録番号マッピングテーブル
- **行数**: 33,764件
- **役割**: 出願番号と登録番号の対応関係
- **生成方法**: プログラムで自動生成
- **用途**: 権利者情報取得の中間テーブル

#### 13. `applicant_mapping` - 申請人マッピングテーブル
- **行数**: 573件
- **役割**: 申請人コードと申請人名の部分的マッピング
- **生成方法**: 逆引きで部分的に生成
- **制限**: 限定的なカバレッジ（14.8%）

#### 14. `applicant_master` - 申請人マスターテーブル
- **行数**: 0件
- **状態**: 未インポート
- **予定ソース**: `upd_appl_reg_info.tsv`等
- **問題**: 申請人名の完全取得ができていない

### 拡張データテーブル（Enhanced系）

#### 15. `jiken_c_t_enhanced` - 事件拡張情報テーブル
- **行数**: 16,688件
- **役割**: 事件基本情報の拡張データ
- **主要列**:
  - `raz_toroku_no` (TEXT): 登録番号
  - `raz_kohohakko_bi` (TEXT): 登録公報発行日
  - `pcz_kokaikohohakko_bi` (TEXT): 公開日
- **TSVソース**: `upd_jiken_c_t.tsv`の追加列

#### 16. `t_basic_item_enhanced` - 基本項目拡張テーブル
- **行数**: 33,404件
- **役割**: 特許庁の基本項目データ
- **主要列**:
  - `prior_app_right_occr_dt` (TEXT): 先願権発生日
  - `conti_prd_expire_dt` (TEXT): 存続期間満了日
  - `rjct_finl_dcsn_dsptch_dt` (TEXT): 拒絶査定発送日
  - `rec_latest_updt_dt` (TEXT): 更新申請日
  - `set_reg_dt` (TEXT): 更新登録日
- **TSVソース**: `upd_t_basic_item_art.tsv`
- **データカバレッジ**: 100%

#### 17. `mgt_info_enhanced` - 管理情報拡張テーブル
- **行数**: 1件
- **役割**: 審判・管理情報
- **主要列**:
  - `trial_dcsn_year_month_day` (TEXT): 審判請求日
  - `processing_type` (TEXT): 審判種別
- **TSVソース**: `upd_mgt_info_t.tsv`
- **データカバレッジ**: ほぼ0%（データ不足）

#### 18. `add_info_enhanced` - 付加情報拡張テーブル
- **行数**: 33,404件
- **役割**: 付加的な商標情報
- **主要列**:
  - `right_request` (TEXT): 審判請求関連
  - `grphc_id` (TEXT): 図形ID
- **TSVソース**: `upd_t_add_info.tsv`
- **データカバレッジ**: 100%

## 📈 データ取得可能性分析

### 取得可能情報（カバレッジ順）

1. **基本情報**: 100%
   - 出願番号、出願日、登録日

2. **指定商品・役務**: 100%
   - 指定商品・役務の詳細内容

3. **商標文字情報**: 90.5%
   - 標準文字: 90.5%
   - 表示用文字: 94.0%
   - 検索用文字: 94.0%

4. **称呼情報**: 89.2%
   - 商標の読み方

5. **申請人コード**: 88.6%
   - 申請人特定用コード

6. **類似群コード**: 79.1%
   - 商品・役務分類コード

7. **商品区分**: 68.9%
   - 商標の区分番号

8. **画像データ**: 31.0%
   - Base64形式の商標画像

9. **権利者情報**: 22.9%
   - 登録済み商標の権利者名・住所

10. **申請人名**: 14.8%
    - 部分的マッピングによる申請人名

### 未取得・問題のある情報

#### ❌ 完全に未取得
- **申請人マスターデータ**: 0件
  - 原因: `applicant_master`テーブル未インポート
  - 影響: 申請人名の大部分が取得不可

#### ⚠️ データ不足
- **審判情報**: ほぼ0%
  - `mgt_info_enhanced`テーブルにデータがほとんどない
  - 審判請求日、審判種別等が取得困難

#### 🐌 パフォーマンス問題
- **商品区分検索**: 44秒
  - 原因: `goods_classes`のLIKE検索
  - 対策: 正規化が必要

## 🔧 最適化済み項目

### ✅ 完了した改善
1. **インデックス最適化**: 21→25個（+9個追加）
2. **重複データ除去**: 61,574行削除
3. **列名統一**: enhanced系テーブルの`app_num`→`normalized_app_num`
4. **データベースVACUUM**: 実行済み

### ⏱️ パフォーマンス改善結果
- 基本検索: 0.002秒
- 日付範囲検索: 0.002秒  
- 複合検索: 0.009秒
- ❌ 商品区分検索: 44.739秒（要改善）

## 🎯 取得可能な商標情報一覧

### 基本情報（100%取得可能）
- ✅ 出願番号
- ✅ 出願日
- ✅ 登録日
- ✅ 登録番号（拡張データから）
- ✅ 登録公報発行日
- ✅ 公開日

### 商標識別情報（90%+取得可能）
- ✅ 標準文字商標（90.5%）
- ✅ 表示用商標文字（94.0%）
- ✅ 検索用商標文字（94.0%）
- ✅ 称呼・読み方（89.2%）
- ✅ 商標画像（31.0%）

### 商品・役務情報（68%+取得可能）
- ✅ 指定商品・役務詳細（100%）
- ✅ 類似群コード（79.1%）
- ⚠️ 商品区分（68.9%、検索遅い）

### 権利関係情報（制限あり）
- ✅ 権利者名・住所（22.9%、登録済みのみ）
- ⚠️ 申請人名（14.8%、部分的）
- ✅ 申請人コード（88.6%）

### 期間・審判情報（拡張データから）
- ✅ 先願権発生日
- ✅ 存続期間満了日
- ✅ 更新申請日
- ✅ 更新登録日
- ✅ 拒絶査定発送日
- ❌ 審判請求日（データほぼなし）
- ❌ 審判種別（データほぼなし）

## 🚧 今後の改善課題

### 高優先度
1. **商品区分検索の高速化**
   - 現状: 44秒
   - 対策: 正規化テーブル作成

2. **申請人マスターデータのインポート**
   - 現状: 0件
   - 対策: `upd_appl_reg_info.tsv`等の取り込み

### 中優先度
3. **審判データの充実**
   - 現状: ほぼ0%
   - 対策: 審判関連TSVファイルの調査

4. **日付データ型の最適化**
   - 現状: すべてTEXT型
   - 対策: DATE型への変換

5. **外部キー制約の追加**
   - 現状: 制約なし
   - 対策: データ整合性向上

## 📋 結論

このデータベースは商標検索システムとして高い完成度を持ち、重要な商標情報の大部分を効率的に提供できています。特に基本情報、商標文字、指定商品・役務については非常に良好なカバレッジを実現しています。

主な制限事項は申請人名の取得率の低さと商品区分検索のパフォーマンス問題ですが、これらは技術的に解決可能な課題です。全体として、商標検索業務に必要な情報を包括的に提供できる優秀なデータベースとなっています。

---
*本レポートは2025-07-12時点のデータベース状態に基づいています。*