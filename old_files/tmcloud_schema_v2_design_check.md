# tmcloud_schema_v2_design.md 設計漏れチェック結果

## 1. インポート対象でないのに設計に含まれているもの

### 1-1. 中間記録関連（TSV仕様書に「インポート対象」の記載なし）
- **upd_jiken_c_t_chonai_dv.tsv**（庁内中間記録）- 1,944行
  - TSV仕様書では「参考情報として記載」とあり、インポート対象の明記なし
- **upd_jiken_c_t_kian_dv.tsv**（起案中間記録）- 16,797行
  - インポート対象: ○
- **upd_jiken_c_t_sinsei_dv.tsv**（申請中間記録）- 32,911行
  - インポート対象: ○

### 1-2. 審判関連（インポート対象だが優先度低）
- **upd_snpn_zkn.tsv**（審判事件）- 18,451件
- **upd_snkt_bnri.tsv**（審決分類）
- これらは設計に含まれているが、TMSONARの商標検索機能としては優先度低

## 2. TSV_FILES_COMPLETE_SPECIFICATION.mdでインポート対象「○」となっているが、設計に含まれていないファイル

### 1. 重要な漏れ

#### 1-1. 商標画像データ
- **ファイル**: upd_t_sample.tsv
- **説明**: 商標見本ファイル（Base64エンコード画像）
- **レコード数**: 10,063行
- **重要度**: 必須（商標画像表示に必要）

#### 1-2. 商標第一表示部
- **ファイル**: upd_t_first_indct_div.tsv
- **説明**: 商標登録原簿の第一表示部情報
- **レコード数**: 16,891行
- **重要度**: 重要（登録商標の原簿管理情報）

#### 1-3. 本権商品名
- **ファイル**: upd_right_goods_name.tsv
- **説明**: 登録商標の指定商品・役務情報
- **レコード数**: 30,581行
- **重要度**: 必須（登録商標の商品・役務表示）

#### 1-4. 経過情報部
- **ファイル**: upd_prog_info_div_t.tsv
- **説明**: 登録商標の経過情報
- **レコード数**: 223,694行
- **重要度**: 重要（登録後の手続き経過情報）

#### 1-5. 被統合申請人情報
- **ファイル**: upd_under_integ_appl_info_mgt.tsv
- **説明**: 申請人コードの統合管理情報
- **レコード数**: 40行
- **重要度**: 有用（申請人名の名寄せ）

#### 1-6. 欄外商標書換申請番号
- **ファイル**: upd_mrgn_t_rwrt_app_num.tsv
- **説明**: 商標書換申請情報
- **レコード数**: 2,996行
- **重要度**: 参考（書換制度は廃止済みだが、設計には含まれている）

### 2. 審判関連（TMSONARでは必要だが、優先度は低い）

#### 2-1. 受付書類
- **ファイル**: upd_aki_uktk_syri_syri_dt_ar.tsv
- **説明**: 審判関連の受付書類データ
- **レコード数**: 100行以上

#### 2-2. 発送書類
- **ファイル**: upd_hssu_syri.tsv
- **説明**: 審判事件の発送書類管理データ
- **レコード数**: 15,350行

#### 2-3. 審判当事者関連
- **ファイル**: upd_snpn_tuzsy.tsv, upd_snpn_tzs_ssn_cd_ys_juhu.tsv
- **説明**: 審判当事者情報

#### 2-4. その他審判関連
- upd_mustt_kkr_sikyuku.tsv（申立に係る請求項）
- upd_mustt_kkr_sti_syuhn_ekmmi.tsv（申立に係る指定商品・役務名）
- upd_snksi_sust_rigi.tsv（審判請求に係る指定商品・役務名）

### 3. 設計に含まれているが、TSVファイル名の確認が必要なもの

#### 3-1. 庁内中間記録
- 設計: upd_jiken_c_t_chonai_dv.tsv（1,944件）
- TSV仕様書には「upd_jiken_c_t_chonai_dv.tsv」が見当たらない
- 「upd_tyuni_syri.tsv」（庁内書類）が対応する可能性

## 結論

TMSONARレベルの検索に必要な主要項目は概ねカバーされていますが、以下の重要な漏れがあります：

1. **商標画像データ**（upd_t_sample.tsv）- 必須
2. **商標第一表示部**（upd_t_first_indct_div.tsv）- 重要
3. **本権商品名**（upd_right_goods_name.tsv）- 必須
4. **経過情報部**（upd_prog_info_div_t.tsv）- 重要

これらを追加すれば、TMSONARレベルの検索機能を完全に実現できます。